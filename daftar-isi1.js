/*! Tabbed TOC for Blogger V2 <https://dte-project.github.io/blogger/tabbed-toc.html> */
!function(e,t){function n(e,t){function n(e){return decodeURIComponent(e)}function r(e){return void 0!==e}function i(e){return"string"==typeof e}function a(e){return i(e)&&""!==e.trim()?'""'===e||"[]"===e||"{}"===e||'"'===e[0]&&'"'===e.slice(-1)||"["===e[0]&&"]"===e.slice(-1)||"{"===e[0]&&"}"===e.slice(-1):!1}function s(e){if(i(e)){if("true"===e)return!0;if("false"===e)return!1;if("null"===e)return null;if("'"===e.slice(0,1)&&"'"===e.slice(-1))return e.slice(1,-1);if(/^-?(\d*\.)?\d+$/.test(e))return+e;if(a(e))try{return JSON.parse(e)}catch(t){}}return e}function l(e,t,n){for(var r,i=t.split("["),a=0,s=i.length;s-1>a;++a)r=i[a].replace(/\]$/,""),e=e[r]||(e[r]={});e[i[a].replace(/\]$/,"")]=n}var o={},c=e.replace(/^.*?\?/,"");return""===c?o:(c.split(/&(?:amp;)?/).forEach(function(e){var i=e.split("="),a=n(i[0]),c=r(i[1])?n(i[1]):!0;c=!r(t)||t?s(c):c,"]"===a.slice(-1)?l(o,a,c):o[a]=c}),o)}e[t]=n}(window,"q2o"),function(e,t){function n(e){return encodeURIComponent(e)}function r(e){return void 0!==e}function i(e){return"string"==typeof e}function a(e){return"number"==typeof e||/^-?(\d*\.)?\d+$/.test(e)}function s(e){return null!==e&&"object"==typeof e}function l(e,t){t=t||{};for(var n in e)r(t[n])?s(e[n])&&s(t[n])&&(t[n]=l(e[n],t[n])):t[n]=e[n];return t}function o(e,t,n){e.addEventListener(t,n,!1)}function c(e,n,i){if(e=t.createElement(e),r(n)&&""!==n&&(e.innerHTML=n),s(i))for(var a in i)i[a]!==!1&&e.setAttribute(a,i[a]);return e}function u(e,t){t=t.split(/\s+/);for(var n;n=t.shift();)e.classList.add(n)}function d(e,t){t=t.split(/\s+/);for(var n;n=t.shift();)e.classList.remove(n)}function f(e,t){return e.classList.contains(t)}function p(e,t,n){t&&e.insertBefore(t,n)}function h(e){e.parentNode&&e.parentNode.removeChild(e)}function m(e,t){var r,i=[];for(r in e)i.push(n(r)+"="+n(e[r]));return"?"+i.join(t||"&")}function g(e,t){return e=(e+"").split(/[?&#]/)[0].replace(/\/+$/,""),r(t)&&(e=e.replace(/\.[\w-]+$/,t?"."+t:"")),e}function v(e){return a(e)?("file:"===E.protocol?"https:":"")+"//www.blogger.com/feeds/"+e+"/posts/summary":g(e)+"/feeds/posts/summary"}function y(e,t,n){var r=/\.css$/i.test(g(e)),i=c(r?"link":"script","",l(r?{href:e,rel:"stylesheet"}:{src:e},n));return i.readyState?i.onreadystatechange=function(){("loaded"===i.readyState||"complete"===i.readyState)&&(i.onreadystatechange=null,t&&t(i))}:t&&o(i,"load",t),p(B,i,B.firstChild),i}function b(e,t,n){n=n||[],n.unshift(t),"function"==typeof U&&U.apply(e,n)}function $(){if(R!==!1){var e=+(M.getItem(J)||-1);if(e>R)return M.setItem(J,0),!0;M.setItem(J,++e)}return!1}function x(e,t){var n,r=e.split("T"),i=r[0].split("-"),a=r[1].split("+")[0].split(":"),s=+a[0],l=s%12||12,o={"M~":F.months[+i[1]-1],"D~":F.days[new Date(e).getDay()],"h~":s+"",Y:i[0],M:i[1],D:i[2],h:l+"",m:a[1],s:Math.floor(+a[2])+"","\\?":F.midday[12>l||24===l?0:1]};for(n in o)t=t.replace(/\\%/g,"&#37;").replace(RegExp("%"+n+"%","g"),o[n]);return t}function w(){C.id||(C.id=J+"-js"),u(C,J+"-js");var e=H.container,n=H.css;n&&!t.getElementById(J+"-css")&&y(i(n)?n:g(C.src,"css"),function(){b(this,"load.asset",[this.href])},{"class":J+"-css",id:J+"-css"}),y(v(O)+m(l(H.query,{callback:"_"+D,"max-results":0})),function(){e?(e=t.querySelector(e),e&&(e.innerHTML=""),p(e,A)):p(C.parentNode,A,C),d(A.parentNode,J+"-loading"),b(this,"load.asset",[this.src]);var n=H.active;a(n)&&(n=T[n]),S[n]&&S[n].click()})}var k,N,j=e.q2o,C=t.currentScript,E=e.location,M=e.localStorage,S={},T=[],I={},q=9999,D=Date.now(),L={i:D,direction:"ltr",url:E.protocol+"//"+E.host,name:"tabbed-toc",css:1,sort:1,ad:!0,active:0,container:0,date:"%M~% %D%, %Y% %h%:%m% %?%",excerpt:0,image:0,target:0,load:0,recent:7,hide:[],text:{title:"Table of Content",loading:"Loading&hellip;",midday:["AM","PM"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],recent:" <sup>New!</sup>"},query:{alt:"json",orderby:"published","max-results":q,"start-index":1}},B=t.head,H=l(L,j(C.src)),_=H.i,O=H.id||g(H.url),J=H.name,R=H.ad,F=H.text,U=H.e,A=c("div",'<h3 class="'+J+'-title">'+F.title+"</h3>",{"class":J+" "+H.direction,id:J+":"+_}),Y=c("p",F.loading,{"class":J+"-loading"});U=U&&e[U],R===!0&&(R=3);var W=j(E.search);r(W[_])&&(delete W[_].url,H=l(H,W[_])),e["_"+D]=function(r){function s(e){var t=this.id.split(":")[1],r=this.title,i=A.parentNode,a=S[r],s=I[r];for(f in S)f!==r&&d(S[f],"active");for(f in I)f!==r&&(d(I[f],"active"),I[f].style.display="none",I[f].previousSibling.style.display="none");s.$||(u(a,"loading"),u(s,"loading"),p(A.children[2],Y),u(i,J+"-loading"),y(v(O)+"/-/"+n(r)+m(l(H.query,{callback:"_"+(D+1)})),function(){d(i,J+"-loading"),d(a,"loading"),d(s,"loading"),h(Y)},{"class":J+"-js",id:J+"-js:"+t})),u(a,"active"),u(s,"active"),s.style.display="",s.previousSibling.style.display="",b(this,"click",[{},S,I]),b(A,"change",[{},a,s]),e.preventDefault()}r=r.feed||{};var f,$=H.sort,x=r.entry||[],w=r.category||[],k=(x.length,w.length);a($)?($=+$,w=w.sort(function(e,t){return e.term.localeCompare(t.term)}),-1===$&&(w=w.reverse())):i($)&&($=e[$],w=w.sort($));var N,j=c("nav","",{"class":J+"-tabs p"});p(A,j),p(A,c("section","",{"class":J+"-panels p"}));var C=Object.values(H.hide);for(f=0;k>f;++f){var E=w[f].term;C.indexOf(E)>-1||(N=c("a",E,{"class":J+"-tab "+J+"-tab:"+f,href:g(H.url)+"/search/label/"+n(E),id:J+"-tab:"+_+"."+f,title:E}),T.push(E),S[E]=N,o(N,"click",s),p(j,N),k-1>f&&p(j,t.createTextNode(" ")),p(A.children[2],c("h4",E,{"class":J+"-title"})),p(A.children[2],I[E]=c("ol","",{"class":J+"-panel "+J+"-panel:"+f,id:J+"-panel:"+_+"."+f})))}b(A,"load",[r,S,I])},e["_"+(D+1)]=function(t){t=t.feed||{};var r,s,h=H.sort,g=((t.link.find(function(e){return"alternate"===e.rel})||{}).href||"").split("/").pop(),w=t.entry||[],j=w.length;for(k=I[g],j&&!f(k,"active")&&S[g].click(),r=0;j>r;++r){var C=r<H.recent?F.recent:"";w[r].$=!!C,w[r].title.$t+=C}a(h)?(h=+h,w=w.sort(function(e,t){return e.title.$t.localeCompare(t.title.$t)}),-1===h&&(w=w.reverse())):i(h)&&(h=e[h],w=w.sort(h));var E=H.target,M=H.image,T=H.excerpt,q="has-title has-url";H.date&&(q+=" has-time"),M&&(q+=" has-image"),T&&(q+=" has-excerpt"),u(A,q),N=function(e){if(e){var t=e.published.$t,n=(e.link.find(function(e){return"alternate"===e.rel})||{}).href,r="";if(n){if(M){var i,s,l,o="media$thumbnail"in e;M===!0&&(M=80),a(M)?(i=s=M+"px",M="s"+M+"-c"):(l=/^s(\d+)(\-[cp])?$/.exec(M))?(i=l[1]+"px",s=l[2]?l[1]+"px":"auto"):(l=/^w(\d+)\-h(\d+)(\-[cp])?$/.exec(M))&&(i=l[1]+"px",s=l[2]+"px"),r+='<p class="'+J+"-image "+(o?"loading":"no-image")+'">',r+=o?'<img alt="" src="'+e.media$thumbnail.url.replace(/\/s\d+(\-c)?\//g,"/"+M+"/")+'" style="display:block;width:'+i+";height:"+s+';">':'<span class="img" style="display:block;width:'+i+";height:"+s+';">',r+="</p>"}if(r+='<h5 class="'+J+'-title"><a href="'+n+'"'+(E?' target="'+E+'"':"")+">"+e.title.$t+"</a></h5>",H.date&&(r+='<p class="'+J+'-time"><time datetime="'+t+'">'+x(t,H.date)+"</time></p>"),T){var u=e.summary.$t.replace(/<.*?>/g,"").replace(/[<>]/g,"").trim(),d=u.length;T===!0&&(T=200),r+='<p class="'+J+"-excerpt"+(d?"":" no-excerpt")+'">'+u.slice(0,T)+(d>T?"&hellip;":"")+"</p>"}return c("li",r,{"class":e.$?"recent":!1})}}};for(r=0;j>r;++r)p(k,N(w[r]));if(M){var L=k.getElementsByTagName("img"),B=function(){u(this.parentNode,"error"),b(this,"error.asset",[this.src])},_=function(){d(this.parentNode,"loading"),b(this,"load.asset",[this.src])};for(r=0,s=L.length;s>r;++r)o(L[r],"error",B),o(L[r],"load",_)}$()&&y(v("298900102869691923")+m(l(H.query,{callback:"_"+D+"_","max-results":21,orderby:"updated"}))+"&q="+n(g.toLowerCase())),I[g].$=!0,b(I[g],"load",[{},S,I])},e["_"+D+"_"]=function(e){e=e.feed||{};var t=e.entry||[];t=t[Math.floor(Math.random()*t.length)],(t=N(t))&&(u(t,"ad"),p(k,t,k.firstChild)),b(t,"load.ad",[e,S,I])},a(H.load)?e.setTimeout(w,+H.load):H.load===!0?o(e,"load",w):w(),b(A,"ready",[H,S,I])}(window,document);
